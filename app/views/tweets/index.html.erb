<h1>tweets前台</h1>
<div class="container">
  <div class="row">
     <div class="col-xs-7">
         <!--submitted_tweet_form-->
          <div class="submitted_tweet_form col-xs-12">
            <%= form_for @tweet do |f| %>
                <div class="form-group">
                  <%=f.text_field :description, placeholder:"What's on your mind", class:"form-control", id:"tweet_description" %>
                </div>
                <div class="submit_button">
                <%=f.submit "Tweet"%>
                </div>
            <% end %>
          </div>

          <%@tweets.each do |tweet| %>   <!--ref rails實戰聖經表單輔助方法 https://ihower.tw/rails/actionview-helpers.html-->
            <div class="tweet_item  col-xs-12">
                 <!--user picture-->
                 <div class="col-xs-3">
                    <div class= "user_picture">
                      <%= image_tag tweet.user.avatar %> <!--image_tag 表單輔助方法-->
                    </div>
                 </div>
                 <!--user details-->
                 <div class="col-xs-offset-1 col-xs-8">
                   <%= tweet.user.name%>, <%=tweet.user.created_at.to_date%><br><!--to_date單輔助方法-->
                   <%= truncate(tweet.description, length: 50)%> <br>  <!--truncate 表單輔助方法-->
                   <%= link_to "Reply",tweet_replies_path(tweet)%>
                   <% if tweet.is_liked?(current_user)%>
                     <%= link_to "Unlike",unlike_tweet_path(tweet),method: :post,class:"text-danger" %>
                   <% else %>
                     <%= link_to "Like",like_tweet_path(tweet),method: :post, class:"text-danger" %>
                   <% end %>
                 </div>
            </div>
           <%end%>
      </div>
      <div class="col-xs-5">
            <h2>Popular</h2>
            <%@users.each do |user| %>
            <div class="tweet_item  col-xs-12">
                 <!--user picture-->
                 <div class="col-xs-3">
                    <div class= "user_picture">
                      <%= image_tag user.avatar %> <!--image_tag 表單輔助方法-->
                    </div>
                 </div>
                 <!--user details-->
                 <div class="col-xs-offset-1 col-xs-8">
                   <%= user.name%><br><!--to_date單輔助方法-->
                   <%= truncate(user.introduction, length: 50)%> <br>  <!--truncate 表單輔助方法-->
                   <%if user != current_user %>
                      <%if current_user.following?(user)%>
                       <%= link_to "Unfollow",followship_path(user),method: :delete, class: "btn btn-info" %> <!--觸發 followships controller-destroy action-->
                      <%else%>
                      <!--/followships(:format)後面是沒有帶:id參數的,但我們需要一個參數進來,所以必須在_path(following_id:xxx)裡面手動丟入參數-->
                       <%= link_to "Follow",followships_path(following_id: user),method: :post, class: "btn btn-info" %> <!--觸發 followships controller-create action-->
                      <%end%>
                   <% end %>
                 </div>
            </div>
           <%end%>
      </div>

  </div><!--row-->
</div><!--container-->
