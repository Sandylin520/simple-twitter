<div class="container">
  <div class="row">
     <div class="col-xs-7">
         <!--submitted_tweet_form-->
          <%= form_for @tweet do |f| %>
                <div class="form-group ">
                  <%=f.text_area :description, placeholder:"What's on your mind", class:"form-control text-area", id:"tweet_description" %>
                </div>
                <div class="submit_button ">
                <%=f.submit "Tweet" ,class:"btn btn-primary" %>
                </div>
          <% end %>


          <%@tweets.each do |tweet| %>   <!--ref rails實戰聖經表單輔助方法 https://ihower.tw/rails/actionview-helpers.html-->
            <div class="tweet_item col-xs-12">
                 <!--user picture-->
                 <div class="col-xs-3">
                    <div class= "user_picture">
                      <%= image_tag tweet.user.avatar %> <!--image_tag 表單輔助方法-->
                    </div>
                 </div>
                 <!--user details-->
                 <div class="col-xs-9">
                   <%= tweet.user.name%>, <%=tweet.user.created_at.to_date%><br>
                   <%= truncate(tweet.description, length: 150)%> <br>  <!--truncate 表單輔助方法-->
                 </div>
                 <div class="col-xs-9 col-xs-offset-3">
                     <%= render partial: "shared/reply_and_like_button", locals: {tweet: tweet}%>                   
                 </div>
            </div>
           <%end%>
      </div>

      <div class="col-xs-5">
            <h2>Popular</h2>
            <%@users.each do |user| %>
            <div class="tweet_item col-xs-12">
                 <!--user picture-->
                 <div class="col-xs-4">
                    <div class= "user_picture">
                      <%= image_tag user.avatar %> <!--image_tag 表單輔助方法-->
                    </div>
                 </div>
                 <!--user details-->
                 <div class="col-xs-8">
                   <%= link_to user.name,tweets_user_path(user) %><br>
                   <%= truncate(user.introduction, length: 100)%> <br>  <!--truncate 表單輔助方法-->
                 </div>
                 <div class="col-xs-8 col-xs-offset-4">
                   <%if user != current_user %>
                      <%if current_user.following?(user)%>
                       <%= link_to "Unfollow",followship_path(user),method: :delete, class: "btn btn-info" %> <!--觸發 followships controller-destroy action-->
                      <%else%>
                      <!--/followships(:format)後面是沒有帶:id參數的,但我們需要一個參數進來,所以必須在_path(following_id:xxx)裡面手動丟入參數-->
                       <%= link_to "Follow",followships_path(following_id: user),method: :post, class: "btn btn-info" %> <!--觸發 followships controller-create action-->
                      <%end%>
                   <% end %>
                 </div>
            </div>
           <%end%>
      </div>

  </div><!--row-->
</div><!--container-->
